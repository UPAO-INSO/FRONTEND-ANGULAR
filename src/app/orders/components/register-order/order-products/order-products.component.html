<div class="flex flex-col sm:flex-row justify-between items-center mb-6 gap-2">
  <h1 class="text-2xl font-bold text-white">
    Crear Orden - Mesa {{ selectedTable()?.id }}
  </h1>
  <button
    class="text-gray-500 hover:text-gray-700 cursor-pointer"
    (click)="onCloseModal()"
  >
    <span class="fa-solid fa-xmark"></span>
  </button>
</div>

<!--  -->
<div class="relative mb-4 sm:mb-6 px-2 sm:px-0">
  <app-search-product-input (value)="debouncedSearch.set($event)" />
</div>

<!--  -->
<app-order-product-tabs
  [productCategories]="productTypes()"
  (categorySelected)="onCategorySelected($event)"
/>
<div
  class="overflow-y-auto max-h-[calc(100vh-23rem)] px-2 sm:px-4 custom-scrollbar"
>
  <!-- Loading state -->
  @if (filteredProducts.isLoading()) {
  <div class="flex items-center justify-center py-12">
    <span class="loading loading-bars loading-lg text-white"></span>
  </div>
  }

  <!-- Error state -->
  @else if (filteredProducts.error()) {
  <div class="flex items-center justify-center py-12">
    <span class="text-red-400">Error al cargar productos</span>
  </div>
  }

  <!-- Products grid -->
  @else if (filteredProducts.value()) {
  <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4">
    @for (product of products(); track product.id) {
    <app-order-product-item
      (click)="onProductClick(product)"
      [product]="product"
      [isKitchen]="false"
      class="cursor-pointer transition-all duration-200 hover:scale-[0.96] hover:shadow-lg hover:-translate-y-1 transform animate-fade-in"
    />
    }
  </div>

  <!-- Empty state -->
  @if (filteredProducts.value()?.length === 0) {
  <div class="flex flex-col items-center justify-center py-12 text-gray-400">
    <span class="fa-solid fa-box-open text-4xl mb-3"></span>
    <p>No hay productos en esta categoría</p>
  </div>
  } }

  <!-- Initial state -->
  @else {
  <div class="flex flex-col items-center justify-center py-12 text-gray-400">
    <span class="fa-solid fa-utensils text-4xl mb-3"></span>
    <p>Selecciona una categoría para ver los productos</p>
  </div>
  }
</div>
